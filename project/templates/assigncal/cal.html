<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8' />
<link rel="stylesheet" href="../../static/style_nick.css" />
<link rel='stylesheet' href='../../static/UIDarkness/jquery-ui.min.css' />
<link href='../../static/fullcalendar.css' rel='stylesheet' />
<link href='../../static/fullcalendar.print.css' rel='stylesheet' media='print' />
<script src='../../static/moment.min.js'></script>
<script src='../../static/jquery.min.js'></script>
<script src='../../static/fullcalendar.min.js'></script>
<script src='../../static/csrfcookie.js'></script>
<script>
	var mytitle = "{{title|escapejs|safe}}";
	var eventlist = [];
	{% for i in events %}
		eventlist.push(
			{ 
			  {% if i.title %}
			  	title : "{{ i.title }}",
			  {% endif %}
			  {% if i.start %}
			  	start : "{{ i.start }}",
			  {% endif %}
			  {% if i.color %}
			  	color : "{{ i.color }}",
			  {% endif %}
			  {% if i.end %}
			  	end : "{{ i.end }}",
			  {% endif %}
			  {% if i.textColor %}
			  	textColor : "{{ i.textColor }}",
			  {% endif %}
			  {% if i.id %}
			  	id : {{ i.id }},
			  {% endif %}
			  {% if i.rendering %}
			  	rendering : "{{ i.rendering }}"
			  {% endif %}
			}
		);
	{% endfor %}
	$(document).ready(function() {
		$('#calendar').fullCalendar({
			theme: true,
			header: {
				left: 'prev,next today',
				center: 'title',
				right: 'month,agendaWeek,agendaDay'
			},
			defaultDate: '2016-01-12',
			defaultView: 'month',
			selectable: true,
			selectHelper: true,
			select: function(start, end, jsEvent, view) {
    			var starttime = start.format();
				$.post('/save', {'starttime': starttime})
				if (view.name == 'month')
				{
					$('#calendar').fullCalendar('gotoDate',start);
					$('#calendar').fullCalendar('changeView','agendaDay');	
				}
				/*
				var title = prompt('Event Title:');
				var eventData;
				if (title) {
					eventData = {
						title: title,
						start: start,
						end: end
					};
					$('#calendar').fullCalendar('renderEvent', eventData, true); // stick? = true
				}
				*/
				$('#calendar').fullCalendar('unselect');
			},
			
			eventMouseover: function( event, jsEvent, view ) 
			{ 
				
				if (view.name == 'month')
				{
					//alert('hi')
					$('#calendar').fullCalendar('eventLimitClick', 'popover');
				}
			},
			/*
			eventLimitClick : function( cellInfo, jsEvent )
			{
				"popover";
				//alert(cellInfo.segs[0].event.title);
			},
			*/
			/*
			eventClick: function(calEvent, jsEvent, view) {
        		alert('Event: ' + calEvent.title);
    		},
    		dayClick: function(date, jsEvent, view) {
        		alert('Clicked on: ' + date.format());
        		alert("The view's name is " + view.name);
    		},*/
			editable: false,
			//slotEventOverlap: false,
			eventLimit: true, // allow "more" link when too many events
			eventOrder : "id,title",
			eventLimitText : function(num)
			{
				return "See Names"
			},
			views: 
			{
		        month: 
	        	{
	        		eventLimit: 2 // adjust to 6 only for agendaWeek/agendaDay	
		        },
		        agenda:
		        {
		        	eventLimit: false
		        }
    		},
			//eventColor : 'green',//'#f58400',
			eventTextColor : 'black',
			events : eventlist
			//events : {{ events }}
		});
		
	});

</script>
</head>
<body>
	<div class="classes_section">
		<div class="logo"></div>	
		<ul class="class_list">
			<li class="class_list"><a href="google.com">COS 333</a></li>
			<li class="class_list"><a href="google.com">MAE 342</a></li>
			<li class="class_list"><a href="google.com">MAE 426</a></li>
			<li class="class_list"><a href="google.com">MAE-IW</a></li>
			<li class="class_list"><a href="google.com">My Frees</a></li>
			<li class="class_list"><a href="google.com">My Frees</a></li>
		</ul>
	</div>
	<div id='calendar'></div>
</body>
</html>
